(this["webpackJsonpclass-manager-frontend"]=this["webpackJsonpclass-manager-frontend"]||[]).push([[0],{197:function(e,t,a){},198:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a.n(c),o=a(14),s=a.n(o),l=(a(197),a(15)),i=(a(198),a(66)),j=a(67),d=a(320),u=a(319),b=a(315),h=a(328),O=a(325),x=a(160),m=a.n(x),f=a(161),p=a.n(f),g=a(317),v=a(162),S=a.n(v),y=a(175),C=a(164),k=a.n(C),T=a(166),N=a.n(T),w=a(165),D=a.n(w),P=a(159),G=a.n(P),E=a(163),I=a.n(E),B=a(309),W=a(242),F=a(316),H=a(314),M=a(167),_=a.n(M),J=a(311),z=a(55),A=a(172),L=a(17),R=a(168),K=a.n(R),U=a(321),V=a(305),q=a(295),Q=a(169),X=a(92),Y=Object(Q.a)({palette:{type:"dark",primary:{main:"#26292C",light:"rgb(81, 91, 95)",dark:"rgb(26, 35, 39)",contrastText:"#ffffff"},secondary:{main:"#00e5ff",light:"rgb(255, 197, 112)",dark:"rgb(200, 147, 89)",contrastText:"rgba(0, 0, 0, 0.87)"},titleBar:{main:"#555555",contrastText:"#ffffff"},error:{main:X.a.A400}}}),Z=a(293),$=a(294),ee={normal:Object(Q.a)({palette:{type:"light",primary:Z.a,secondary:$.a,titleBar:{main:"#555555",contrastText:"#ffffff"},error:{main:X.a.A400}}}),dark:Y};var te=r.a.createContext({currentTheme:"normal",setTheme:null}),ae=function(e){var t=e.children,a=localStorage.getItem("appTheme")||"normal",r=Object(c.useState)(a),o=Object(l.a)(r,2),s=o[0],i=o[1],j=function(e){return ee[e]}(s),d={currentTheme:s,setTheme:function(e){localStorage.setItem("appTheme",e),i(e)}};return Object(n.jsx)(te.Provider,{value:d,children:Object(n.jsx)(q.a,{theme:j,children:t})})},ne=a(22),ce=a(299),re=a(303),oe=a(302),se=a(298),le=a(300),ie=a(301),je=a(116),de=a(137),ue=a.n(de);function be(){var e=new Date;return e.setDate(e.getDate()+(5-(new Date).getDay()+7)),e}function he(e){return 0===e.getDay()||6===e.getDay()}var Oe=new Map;function xe(e){fetch("/api/periodsSchedule").then((function(e){return e.json()})).then((function(e){return function(e){for(var t=0;t<e.length;++t)for(var a=0;a<e[t].length;++a)Oe.has(e[t][a].name)||Oe.set(e[t][a].name,ue()({luminosity:"light",hue:"blue"})),e[t][a].color=Oe.get(e[t][a].name);return e}(e)})).then((function(t){e(t)}))}var me=["Monday","Tuesday","Wednesday","Thursday","Friday"],fe=["Day/Time","8:00-9:00","9:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00"],pe={backgroundColor:"#f50057",fontSize:"1.5em"};function ge(e){var t=e.periodsSchedule,a=e.setPeriodsSchedule;r.a.useEffect((function(){xe(a)}),[]);var c=0;return Object(n.jsx)(je.a,{className:"time-table-container",children:t&&Object(n.jsx)(se.a,{component:je.a,children:Object(n.jsxs)(ce.a,{stickyHeader:!0,children:[Object(n.jsx)(le.a,{children:Object(n.jsx)(ie.a,{children:fe.map((function(e,t){return Object(n.jsx)(oe.a,{align:"center",style:pe,className:"time-table-cell",children:e},t)}))})}),Object(n.jsx)(re.a,{children:t.map((function(e,t){return Object(n.jsxs)(ie.a,{children:[Object(n.jsx)(oe.a,{align:"center",style:pe,className:"time-table-cell",children:me[c++]}),e.map((function(e){return Object(n.jsx)(oe.a,{colSpan:e.end-e.start,align:"center",className:"time-table-cell",style:(t=e.color,{backgroundColor:t,fontSize:"1.5em"}),children:e.name},e.id);var t}))]},t)}))})]})})})}var ve=a(95),Se=a(235),ye=a(238),Ce=a(237),ke=a(310),Te=a(85),Ne=a(25),we=a(91);function De(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{children:Object(n.jsx)(Ne.a,{utils:Te.a,children:Object(n.jsx)(je.a,{style:{overflow:"hidden"},elevation:0,variant:"outlined",children:Object(n.jsx)(we.a,{disablePast:!0,date:e.selectedDate,onChange:e.handleDateChange,shouldDisableDate:he,maxDate:be()})})})})})}var Pe=a(304),Ge=a(241),Ee=a(329),Ie=a(326);function Be(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("form",{children:Object(n.jsxs)(Pe.a,{component:"fieldset",children:[Object(n.jsx)(Ge.a,{component:"legend",children:"Choose slot duration"}),Object(n.jsxs)(Ee.a,{row:!0,"aria-label":"Slot Duration",name:"slotDuration",defaultValue:"1",onChange:e.handleRadioChange,children:[Object(n.jsx)(V.a,{value:"1",control:Object(n.jsx)(Ie.a,{color:"primary"}),label:"1 Hour",labelPlacement:"bottom"}),Object(n.jsx)(V.a,{value:"2",control:Object(n.jsx)(Ie.a,{color:"primary"}),label:"2 Hours",labelPlacement:"bottom"}),Object(n.jsx)(V.a,{value:"3",control:Object(n.jsx)(Ie.a,{color:"primary"}),label:"3 Hours",labelPlacement:"bottom"})]})]})})})}var We=a(157),Fe=a.n(We),He=a(330),Me=Object(A.a)((function(e){return{root:{display:"flex",justifyContent:"center",float:"left",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}));function _e(e){var t=Me();return Object(n.jsx)(je.a,{className:t.root,style:{overflow:"hidden"},elevation:0,children:e.freeSlots.map((function(t){return Object(n.jsx)(He.a,{variant:e.slotSelected===t?"default":"outlined",clickable:!0,color:"primary",label:t+":00",onClick:function(){return e.handleSlotSelected(t)}})}))})}var Je=a(156),ze=a(327),Ae=a(324);function Le(e){return Object(n.jsx)(Ae.a,Object(Je.a)({elevation:6,variant:"filled"},e))}function Re(e){return Object(n.jsx)("div",{children:Object(n.jsx)(ze.a,{open:e.open,autoHideDuration:6e3,onClose:e.handleClose,children:Object(n.jsx)(Le,{onClose:e.handleClose,severity:e.success?"success":"error",children:e.success?"Action completed successfully!":"Could not complete the action!"})})})}var Ke=a(331);function Ue(e){return Object(n.jsx)("div",{children:Object(n.jsx)(Ke.a,{margin:"normal",label:"Subject name",color:"primary",fullWidth:!0,onBlur:e.handleInput})})}var Ve=[];function qe(e){e.periodsSchedule;var t=e.setPeriodsSchedule,a=r.a.useState(!1),c=Object(l.a)(a,2),o=c[0],s=c[1],i=r.a.useState(""),j=Object(l.a)(i,2),d=j[0],u=j[1],b=r.a.useState(1),h=Object(l.a)(b,2),O=h[0],x=h[1],m=r.a.useState(new Date),f=Object(l.a)(m,2),p=f[0],g=f[1],v=r.a.useState(null),S=Object(l.a)(v,2),y=S[0],C=S[1],k=r.a.useState(null),T=Object(l.a)(k,2),N=T[0],w=T[1],D=r.a.useState(!1),P=Object(l.a)(D,2),G=P[0],E=P[1],I=r.a.useState(null),B=Object(l.a)(I,2),W=B[0],F=B[1],H=r.a.useState(!0),M=Object(l.a)(H,2),_=M[0],J=(M[1],r.a.useState("sm")),z=Object(l.a)(J,2),A=z[0],L=(z[1],function(){s(!1)});return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ve.a,{variant:"contained",color:"secondary",onClick:function(){s(!0)},children:"Book a slot"}),Object(n.jsxs)(Se.a,{fullWidth:_,maxWidth:A,open:o,onClose:L,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(ke.a,{id:"form-dialog-title",children:"Book"}),Object(n.jsxs)(Ce.a,{children:[Object(n.jsx)(Ue,{handleInput:function(e){u(e.target.value)}}),Object(n.jsx)(Be,{handleRadioChange:function(e){x(e.target.value)}}),Object(n.jsx)(De,{selectedDate:p,handleDateChange:g}),Object(n.jsx)(ve.a,{startIcon:Object(n.jsx)(Fe.a,{}),fullWidth:!0,onClick:function(){var e={slotDurationWanted:O,dateOfSlotWanted:p};fetch("/api/periodsSchedule/free",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){Ve=[],e.map((function(e){return Ve.push(e.start)})),C(Ve)}))},children:"Search for free slots"}),y&&Object(n.jsx)(_e,{freeSlots:y,slotSelected:N,handleSlotSelected:function(e){w(e)}})]}),Object(n.jsxs)(ye.a,{children:[Object(n.jsx)(ve.a,{variant:"outlined",onClick:L,color:"primary",children:"Close"}),N&&Object(n.jsx)(ve.a,{variant:"contained",disableElevation:!0,onClick:function(){var e={subjectName:d,dateOfSlotWanted:p,slotSelected:N,slotDurationWanted:O};fetch("/api/periodsSchedule/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok?(F(!0),xe(t)):F(!1),E(!0)}))},color:"primary",children:"Confirm"}),Object(n.jsx)(Re,{open:G,handleClose:function(){E(!1)},success:W})]})]})]})}var Qe=a(113),Xe=a.n(Qe),Ye=a(158),Ze=a(312),$e=a(322);function et(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Ne.a,{utils:Te.a,children:Object(n.jsx)($e.a,{ampm:!1,minutesStep:60,disablePast:!0,margin:"normal",id:"date-picker-dialog",label:"Pick slot",format:"dd/MM/yyyy HH:mm",views:["date","hours"],value:e.slotToCancel,onChange:e.handleDateTimeChange,KeyboardButtonProps:{"aria-label":"change date"},shouldDisableDate:he,maxDate:be()})})})}function tt(e){e.periodsSchedule;var t=e.setPeriodsSchedule,a=r.a.useState(!1),c=Object(l.a)(a,2),o=c[0],s=c[1],i=r.a.useState(new Date),j=Object(l.a)(i,2),d=j[0],u=j[1],b=r.a.useState(!1),h=Object(l.a)(b,2),O=h[0],x=h[1],m=r.a.useState(null),f=Object(l.a)(m,2),p=f[0],g=f[1],v=function(){s(!1)},S=function(){var e=Object(Ye.a)(Xe.a.mark((function e(){var a,n;return Xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=d.getHours(),n={slotToCancel:d,hour:a},fetch("/api/periodsSchedule/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?(g(!0),xe(t)):g(!1),x(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ve.a,{variant:"contained",color:"secondary",onClick:function(){s(!0)},children:"Cancel a slot"}),Object(n.jsxs)(Se.a,{open:o,onClose:v,"aria-labelledby":"form-dialog-title",children:[Object(n.jsx)(ke.a,{id:"form-dialog-title",children:"Cancel"}),Object(n.jsxs)(Ce.a,{children:[Object(n.jsx)(Ze.a,{children:"Choose the date and time of the slot you want to cancel."}),Object(n.jsx)(et,{slotToCancel:d,handleDateTimeChange:u})]}),Object(n.jsxs)(ye.a,{children:[Object(n.jsx)(ve.a,{variant:"outlined",onClick:v,color:"primary",children:"Close"}),Object(n.jsx)(ve.a,{variant:"contained",disableElevation:!0,onClick:function(){return S()},color:"primary",children:"Confirm"}),Object(n.jsx)(Re,{open:O,handleClose:function(){x(!1)},success:p})]})]})]})}var at=Object(A.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}}));function nt(e){var t=e.periodsSchedule,a=e.setPeriodsSchedule,c=at();return Object(n.jsxs)("div",{className:c.root,children:[Object(n.jsx)(tt,{periodsSchedule:t,setPeriodsSchedule:a}),Object(n.jsx)(qe,{periodsSchedule:t,setPeriodsSchedule:a})]})}var ct=r.a.createContext(null),rt=function(){var e=r.a.useState(null),t=Object(l.a)(e,2),a=t[0],c=t[1],o=r.a.useContext(ct);return Object(n.jsxs)("div",{children:[o&&o.admin&&Object(n.jsx)(nt,{periodsSchedule:a,setPeriodsSchedule:c}),Object(n.jsx)(ge,{periodsSchedule:a,setPeriodsSchedule:c})]})},ot=a(313),st=a(333),lt=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){fetch("/api/Notifications").then((function(e){return console.log(typeof e),e.json()})).then((function(e){r(e)}))}),[]),Object(n.jsx)(B.a,{className:"notifications",children:a&&a.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(W.a,{button:!0,alignItems:"flex-start",children:[Object(n.jsx)(ot.a,{children:Object(n.jsx)(st.a,{src:"https://ui-avatars.com/api/?background=random&rounded=true&name="+e.subject})}),Object(n.jsx)(H.a,{primary:e.subject,secondary:e.cancelled?"The class on ".concat(e.date," at ").concat(e.time," hours is cancelled."):"The class is scheduled for ".concat(e.date," at ").concat(e.time," hours.")})]},e._id),Object(n.jsx)(b.a,{variant:"inset"},e._id.slice(0,5))]})}))})},it=function(){return Object(n.jsxs)(ne.c,{children:[Object(n.jsx)(ne.a,{exact:!0,path:"/",component:rt}),Object(n.jsx)(ne.a,{exact:!0,path:"/Notifications",component:lt})]})},jt=a(308),dt=a(323),ut=a(318),bt=240,ht={_subGroup:localStorage.getItem("subGroup")||"E2",_group:localStorage.getItem("group")||"G1"},Ot=Object(A.a)((function(e){return{root:{display:"flex"},nested:{paddingLeft:e.spacing(4)},drawer:Object(j.a)({},e.breakpoints.up("sm"),{width:bt,flexShrink:0}),appBar:Object(j.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(bt,"px)"),marginLeft:bt}),menuButton:Object(j.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),title:{flexGrow:1},formControl:{minWidth:110},toolbar:e.mixins.toolbar,drawerPaper:{width:bt},content:{flexGrow:1,padding:e.spacing(3)}}}));var xt=function(e){var t=Object(c.useContext)(te),a=t.currentTheme,o=t.setTheme,s=Boolean("dark"===a),j=e.window,x=Ot(),f=Object(L.a)(),v=r.a.useState(!1),C=Object(l.a)(v,2),T=C[0],w=C[1],P=r.a.useState(!0),E=Object(l.a)(P,2),M=E[0],A=E[1],R=r.a.useState(ht._group),q=Object(l.a)(R,2),Q=q[0],X=q[1],Y=r.a.useState(ht._subGroup),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],ae=r.a.useContext(ct),ne=function(){w(!T)},ce=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:x.toolbar}),Object(n.jsxs)(B.a,{children:[" ",Object(n.jsx)(b.a,{}),ae&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(W.a,{button:!0,onClick:function(){A(!M)},children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(G.a,{})}),Object(n.jsx)(H.a,{primary:"Profile Info"}),M?Object(n.jsx)(m.a,{}):Object(n.jsx)(p.a,{})]}),Object(n.jsx)(g.a,{in:M,timeout:"auto",unMountOnExit:!0,children:Object(n.jsxs)(B.a,{component:"div",disablePadding:!0,children:[Object(n.jsxs)(W.a,{button:!0,className:x.nested,children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(S.a,{})}),Object(n.jsx)(H.a,{primary:ae.username})]}),Object(n.jsxs)(W.a,{button:!0,className:x.nested,children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(I.a,{})}),Object(n.jsxs)(Pe.a,{className:x.formControl,children:[Object(n.jsx)(jt.a,{id:"Group-label",children:"Group"}),Object(n.jsxs)(dt.a,{labelId:"Group-label",id:"Group",value:Q,onChange:function(e){localStorage.setItem("group",e.target.value),X(e.target.value)},label:"Group",children:[Object(n.jsx)(ut.a,{value:"G1",children:"G1"}),Object(n.jsx)(ut.a,{value:"G2",children:"G2"})]})]})]}),Object(n.jsxs)(W.a,{button:!0,className:x.nested,children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(k.a,{})}),Object(n.jsxs)(Pe.a,{className:x.formControl,children:[Object(n.jsx)(jt.a,{id:"subGroup-label",children:"Sub-Group"}),Object(n.jsxs)(dt.a,{labelId:"subGroup-label",id:"subGroup",value:$,onChange:function(e){localStorage.setItem("subGroup",e.target.value),ee(e.target.value)},label:"Sub-Group",children:[Object(n.jsx)(ut.a,{value:"E1",children:"E1"}),Object(n.jsx)(ut.a,{value:"E2",children:"E2"}),Object(n.jsx)(ut.a,{value:"E3",children:"E3"}),Object(n.jsx)(ut.a,{value:"E4",children:"E4"}),Object(n.jsx)(ut.a,{value:"E5",children:"E5"}),Object(n.jsx)(ut.a,{value:"E6",children:"E6"})]})]})]})]})})]}),Object(n.jsxs)(W.a,{button:!0,component:i.b,to:"/",children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(H.a,{primary:"Time-Table"})]},"Time-Table"),Object(n.jsxs)(W.a,{button:!0,component:i.b,to:"/Notifications",children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(N.a,{})}),Object(n.jsx)(H.a,{primary:"Notifications"})]},"Notifications"),Object(n.jsx)(b.a,{})]})]}),re=void 0!==j?function(){return j().document.body}:void 0;return Object(n.jsxs)("div",{className:x.root,children:[Object(n.jsx)(u.a,{}),Object(n.jsx)(d.a,{position:"fixed",className:x.appBar,children:Object(n.jsxs)(J.a,{children:[Object(n.jsx)(y.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:ne,className:x.menuButton,children:Object(n.jsx)(_.a,{})}),Object(n.jsx)(z.a,{variant:"h6",noWrap:!0,className:x.title,children:"Class Manager"}),Object(n.jsx)(V.a,{control:Object(n.jsx)(U.a,{color:"secondary",checked:s,onChange:function(e){var t=e.target.checked;o(t?"dark":"normal")}}),label:Object(n.jsx)(K.a,{})}),!ae&&Object(n.jsx)(ve.a,{variant:"outlined",size:"large",href:"/api/auth/google",children:"Login"}),ae&&Object(n.jsx)(ve.a,{variant:"outlined",size:"large",href:"/api/auth/logout",children:"Logout"})]})}),Object(n.jsxs)("nav",{className:x.drawer,"aria-label":"mailbox folders",children:[Object(n.jsx)(O.a,{smUp:!0,implementation:"css",children:Object(n.jsx)(h.a,{container:re,variant:"temporary",anchor:"rtl"===f.direction?"right":"left",open:T,onClose:ne,classes:{paper:x.drawerPaper},ModalProps:{keepMounted:!0},children:ce})}),Object(n.jsx)(O.a,{xsDown:!0,implementation:"css",children:Object(n.jsx)(h.a,{classes:{paper:x.drawerPaper},variant:"permanent",open:!0,children:ce})})]}),Object(n.jsxs)("main",{className:x.content,children:[Object(n.jsx)("div",{className:x.toolbar}),Object(n.jsx)(it,{})]})]})};var mt=function(){var e=r.a.useState(null),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.useEffect((function(){fetch("/api/profile").then((function(e){return e.json()})).then((function(e){c(e)}))}),[]),Object(n.jsx)(ct.Provider,{value:a,children:Object(n.jsx)(i.a,{children:Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(xt,{className:"nav-bar"})})})})};s.a.render(Object(n.jsx)(ae,{children:Object(n.jsx)(mt,{})}),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.3b88d2f6.chunk.js.map